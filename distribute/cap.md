## CAP 定理

CAP 定理指的是在分布式系统中不可能同时满足 一致性(Consistency)、可用性(Availability)、分区容忍性(Partition tolerance) ，最多只能同时满足其中的两个。

一致性(Consistency) 指的是数据更新操作完成后，所有节点在同一时间的数据完全一致。在分布式系统中数据分布在不同的节点，要保证数据一致性需要在数据更新操作返回前将数据复制到整个集群的所有节点。

可用性(Availability) 指的是在整个系统崩溃前，系统一直能在指定的时间内响应。

分区容忍性(Partition tolerance) 指的是系统在遇到某些节点故障或者网络分区故障时，仍然能够队外提供一致性或者可用性的保证。

在 CAP 定理约束下，分布式系统可以分为三类：
- CA：此类系统不允许发生网络分区，即整个系统只有一个节点，也就是单节点系统
- AP：此类系统要求发生网络分区时系统保持可用，此时需要放弃一致性，即发生网络分区时不同网络分区的数据不一致
- CP：此类系统要求保证数据严格一致，当发生网络分区时需要等待网络恢复才能对外提供服务


## BASE 理论

CAP 理论中的一致性指的是强一致性，在 CAP 理论下分布式系统中可用性和一致性是不能兼容的，在实际生产中可以在一致性和可用性上做出一些妥协从而达到二者的兼容，即 BASE 理论。

BASE 理论指的是在 CAP 理论下对一致性和可用性进行妥协，即：基本可用(Basically Available)、软状态(Soft state)、最终一致性(Eventually consistent)。

```基本可用``` 指的是在系统出现不可预知的故障时基本能保持可用，通常体现在响应时间上的损失(响应时间变长) 和功能上的损失(业务降级)。

```软状态``` 指的是允许系统中的数据存在中间状态，并认为该状态不影响系统的整体可用性。

```最终一致性``` 指的是在一定的时间内，系统能够保证在没有其他更新操作下，数据最终能够达到一致的状态。







serializability 和 linearizability